<!--
  ~ Copyright (c) 2015 Codethink Limited
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License"); you may
  ~ not use this file except in compliance with the License. You may obtain
  ~ a copy of the License at
  ~
  ~         http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  ~ WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  ~ License for the specific language governing permissions and limitations
  ~ under the License.
  -->
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12" ng-show="!worklist.editing">
            <h1 class="no-margin-bottom" view-title>
                {{worklist.title}}
                <a ng-click="toggleEditMode()">
                    <i class="fa fa-pencil"></i>
                </a>
                <button type="button" class="pull-right close" title="Delete"
                        ng-click="remove()">
                    <i class="fa fa-times"></i>
                </button>
            </h1>
        </div>
        <div class="col-sm-12" ng-show="worklist.editing">
            <h1 class="no margin-bottom">
                <input type="text" class="form-control form-control-inline h1"
                       ng-model="worklist.title">
                <a ng-click="toggleEditMode()">
                    <i class="fa fa-pencil"></i>
                </a>
                <button type="button" class="pull-right close" title="Delete"
                        ng-click="remove()">
                    <i class="fa fa-times"></i>
                </button>
            </h1>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <table class="table table-striped table-hover">
                <tbody as-sortable="sortableOptions" ng-model="worklist.items"
                       ng-show="!worklist.editing">
                    <tr as-sortable-item ng-repeat="item in worklist.items">
                        <td as-sortable-item-handle ng-switch="item.type" class="hover-row"
                            title="{{item.type}}: {{item.title}}">
                            <a href="#!/story/{{item.id}}" ng-switch-when="story">
                                <div class="col-sm-1">
                                    <i class="fa fa-sb-story text-muted"></i>
                                </div>
                                <div class="col-sm-11">
                                    {{item.title}}
                                </div>
                            </a>
                            <a href="#!/story/{{item.story_id}}" ng-switch-when="task">
                                <div class="col-sm-1">
                                    <i class="fa fa-tasks text-muted"></i>
                                </div>
                                <div class="col-sm-11">
                                    {{item.title}}
                                </div>
                            </a>
                        </td>
                    </tr>
                </tbody>
                <tbody ng-show="worklist.editing">
                    <tr ng-repeat="item in worklist.items">
                        <td ng-switch="item.type" class="hover-row"
                            title="{{item.type}}: {{item.title}}">
                            <a href="#!/story/{{item.value}}" ng-switch-when="story">
                                <div class="col-sm-1">
                                    <i class="fa fa-sb-story text-muted"></i>
                                </div>
                                <div class="col-sm-10">
                                    {{item.title}}
                                </div>
                            </a>
                            <a href="#!/story/{{item.story_id}}" ng-switch-when="task">
                                <div class="col-sm-1">
                                    <i class="fa fa-tasks text-muted"></i>
                                </div>
                                <div class="col-sm-10">
                                    {{item.title}}
                                </div>
                            </a>
                            <div class="col-sm-1">
                                <button type="button" class="close" title="Remove"
                                   ng-click="removeItem(item)">
                                    &times;
                                </button>
                            </div>
                        </td>
                    </tr>
                </tbody>
                <tbody ng-show="worklist.items.length == 0">
                    <tr>
                        <td>
                            This worklist is currently empty.
                        </td>
                    </tr>
                </tbody>
                <tbody>
                    <tr class="hover-row text-center" title="Add Item"
                        ng-click="addItem()">
                        <td>
                            Add Items
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
