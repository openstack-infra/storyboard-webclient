<!--
  ~ Copyright (c) 2015 Codethink Limited
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License"); you may
  ~ not use this file except in compliance with the License. You may obtain
  ~ a copy of the License at
  ~
  ~         http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  ~ WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  ~ License for the specific language governing permissions and limitations
  ~ under the License.
  -->
<div as-sortable="cardsSortable"
     ng-model="lane.worklist.items"
     class="kanban-lane-contents"
     id="lane-{{lane.id}}">
    <div class="kanban-card"
         as-sortable-item
         ng-repeat="item in lane.worklist.items"
         ng-switch="item.item_type">
        <div as-sortable-item-handle ng-switch-when="story">
            <button type="button" class="close" title="Remove"
                    ng-click="removeCard(lane.worklist, item)">
                &times;
            </button>
            <i class="fa fa-sb-story text-muted"></i>
            <a href="#!/story/{{item.story.id}}">
                {{item.story.title}}
            </a>
        </div>
        <div as-sortable-item-handle ng-switch-when="task">
            <button type="button" class="close" title="Remove"
                    ng-click="removeCard(lane.worklist, item)">
                &times;
            </button>
            <i class="fa fa-tasks text-muted"></i>
            <a href="#!/story/{{item.task.story_id}}">
                {{item.task.title}}
            </a>
            <user-typeahead ng-show="item.task.assignee_id"
                ng-model="item.task.assignee_id"/>
        </div>
    </div>
</div>
<div class="text-center text-muted">
    <button ng-click="addItem(lane.worklist)"
            class="btn btn-kanban-lane">
        Add a card...
    </button>
</div>
