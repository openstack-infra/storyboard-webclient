<!--
  ~ Copyright (c) 2015 Codethink Limited
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License"); you may
  ~ not use this file except in compliance with the License. You may obtain
  ~ a copy of the License at
  ~
  ~         http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  ~ WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  ~ License for the specific language governing permissions and limitations
  ~ under the License.
  -->
<div class="kanban-lane-contents-readonly"
     id="lane-{{ lane.id }}">
    <div class="kanban-card-readonly"
         ng-class="{'kanban-card-due': isDue(item), 'kanban-card-late': isLate(item)}"
         ng-repeat="item in lane.worklist.items"
         ng-switch="item.item_type"
         ng-click="showCardDetail(item, lane)">
        <div ng-switch-when="story">
            <div class="row">
                <div class="col-xs-1">
                    <i class="fa fa-sb-story text-muted"></i>
                </div>
                <div class="col-xs-10 title">
                    <a>
                        {{item.story.title}}
                    </a>
                </div>
            </div>
            <div class="row target-date" ng-show="item.resolved_due_date">
                <div class="col-xs-1">
                    <i class="fa fa-clock text-muted"></i>
                </div>
                <div class="col-xs-10">
                    <span time-moment
                          eventdate="item.resolved_due_date.date"
                          format-string="'MMM Do, YYYY'">
                    </span>
                    <br/>
                    <span class="text-muted">{{item.resolved_due_date.name}}</span>
                </div>
            </div>
        </div>
        <div ng-switch-when="task">
            <div class="row">
                <div class="col-xs-1">
                    <i class="fa fa-sb-task text-muted"></i>
                </div>
                <div class="col-xs-10 title">
                    <a>
                        {{item.task.title}}
                    </a>
                </div>
            </div>
            <div class="row target-date" ng-show="item.resolved_due_date">
                <div class="col-xs-1">
                    <i class="fa fa-clock text-muted"></i>
                </div>
                <div class="col-xs-10">
                    <span time-moment
                          eventdate="item.resolved_due_date.date"
                          format-string="'MMM Do, YYYY'">
                    </span>
                    <br/>
                    <span class="text-muted">{{item.resolved_due_date.name}}</span>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12">
                    <user-typeahead ng-show="item.task.assignee_id"
                                    ng-model="item.task.assignee_id"/>
                </div>
            </div>
        </div>
    </div>
</div>
