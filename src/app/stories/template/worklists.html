<div class="panel panel-default">
    <div class="panel-heading">
        <button type="button" class="close" aria-hidden="true"
                ng-click="close()">&times;</button>
        <h3 class="panel-title">In worklists you're subscribed to</h3>
    </div>
    <div class="panel-body">
        <table class="table table-striped">
        <tbody>
            <tr ng-repeat="worklist in worklists">
                <td>
                    <a href="#!/worklist/{{worklist.id}}" rel="nofollow">{{worklist.title}}</a>
                    <span class="text-muted pull-right" ng-show="worklist.automatic">
                        (automatic)
                    </span>
                    <div ng-click="showItems = !showItems">
                        <a href>
                            <i class="fa"
                               ng-class="{'fa-caret-right': !showItems,
                                          'fa-caret-down': showItems}"></i>
                            <small>
                                {{showItems ? 'Hide' : 'Show'}} items...
                            </small>
                        </a>
                    </div>
                    <table class="table table-striped table-condensed subtable" ng-show="showItems">
                        <tr ng-repeat="item in worklist.relatedItems | orderBy: 'list_position'">
                            <td>
                                {{item.item_type | capitalize}} {{item.item_id}}
                                <span class="pull-right">
                                    {{item.list_position + 1}} of {{worklist.items.length}}
                                </span>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </tbody>
        </table>
    </div>
</div>
